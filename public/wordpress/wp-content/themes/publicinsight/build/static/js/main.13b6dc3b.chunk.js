(this.webpackJsonpreact_client=this.webpackJsonpreact_client||[]).push([[0],{118:function(e,t,a){e.exports="http://publiccloud.local/pi/wp-content/themes/publicinsight/build/static/media/delete.aa4cd934.png"},119:function(e,t,a){e.exports="http://publiccloud.local/pi/wp-content/themes/publicinsight/build/static/media/edit.824f47de.png"},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),s=a.n(l),c=(a(87),a(63),a(20)),o={display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:99999,background:"rgba(0, 0, 0, 0.3)"},i=Object(c.b)((function(e){return{isLoading:e.loading.isLoading}}),null)((function(e){return e.isLoading?r.a.createElement("div",{style:o},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):null})),u=a(32),m=a(77),p=a(9),d={postAdmin:[],listUser:[],pageCountListUser:1,currentPageListUser:1,pageCountListPost:1,currentPageListPost:1},g=function(e){return e%10===0?e/10:Math.floor(e/10)+1},h={loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Object(p.a)({},e,{isLoading:t.isLoading});default:return e}},admin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIST_POST_ADMIN":return Object(p.a)({},e,{postAdmin:t.payload.posts.data,currentPageListPost:t.payload.posts.current_page,pageCountListPost:g(t.payload.posts.total)});case"SET_LIST_USER":return Object(p.a)({},e,{listUser:t.payload.users.data,currentPageListUser:t.payload.users.current_page,pageCountListUser:g(t.payload.users.total)});default:return e}}},f=Object(u.c)(h),b=(a(92),[m.a]);var E,v=Object(u.d)(f,{},u.a.apply(void 0,b)),y=a(11),w=a(17),k=a(15),O=a(14),N=a(144),C=a(123),x=a(124),S=a(125),P=a(126),j=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={name:"",isOpen:!1,onDelete:function(){return null}},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e.onYesClick=function(){e.toggle(),e.state.onDelete()},e}return Object(w.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isOpen,a=e.name;return r.a.createElement(N.a,{isOpen:t,toggle:this.toggle},r.a.createElement(C.a,{toggle:this.toggle},"Delete ",a),r.a.createElement(x.a,null,"Are you sure you want to delete ",a,"?"),r.a.createElement(S.a,null,r.a.createElement(P.a,{color:"danger",onClick:this.onYesClick},"Delete"),r.a.createElement(P.a,{color:"secondary",onClick:this.toggle},"Cancel")))}}]),a}(n.Component);j.registerModal=function(e){E=e},j.show=function(e,t){if(!E)throw new Error("You must registerModal(ref) first");E.setState({isOpen:!0,name:e,onDelete:t})};var A=a(30),L=a(16),T=a(39),I=a(31),U=a(127),D=a(128),M=a(133),_=a(134),z=a(52),B=a.n(z),R=a(79),F=a(53),H=a.n(F),K="http://publiccloud.local/pi/wp-json",Y=H.a.create({baseURL:K,timeout:3e4,headers:{"Content-Type":"application/json"}});H.a.create({baseURL:K,timeout:15e3,headers:{"Content-Type":"multipart/form-data"}});if(null!=document.getElementById("wp-header")){var W=document.getElementById("wp-header").value;W&&(Y=H.a.create({baseURL:K,timeout:3e4,headers:{"Content-Type":"application/json","X-WP-Nonce":W}}))}var q=function(e){return Y.get("/api/post/get?id=".concat(e))},G=function(e){return Y.get("/api/post/list?page=".concat(e))},J=function(e){return Y.post("/api/post/approve",{id:e})},X=function(e,t){return Y.post("/api/post/reject",{id:e,message:t})},$=function(e){return Y.get("/api/my-post/get?id=".concat(e))},Q=function(e){var t=e.page,a=e.state,n=e.type;return Y.get("/api/my-post/list",{params:{page:t,state:a,type:n}})},V=function(e){var t=e.id;return Y.delete("/api/my-post/delete",{params:{id:t}})},Z=function(e){return Y.get("/api/author/search?page=".concat(e))},ee=function(e){return Y.get("/api/tag/search?page=".concat(e))},te=function(e){return Y.get("/api/user/getUsers?page=".concat(e))},ae=function(e){return Y.put("/api/user/updateAllowCreatePost?id=".concat(e))},ne=a(8),re=a.n(ne),le=a(18),se=a(57),ce=a(118),oe=a(119),ie={draft:"Draft",submitted:"Waiting for Approval",rejected:"Rejected",published:"Published"},ue={draft:"blue",submitted:"green",rejected:"red",approved:"black"},me={news:"short",comment:"comment",analysis:"analysis"},pe=a(4),de=a.n(pe),ge=a(56),he=function(e){var t=e.post,a=e.reload,n=e.checkUser,l=(t.tags?t.tags.map((function(e){return e.name})):[])[0]||"";return r.a.createElement(U.a,{className:"pb-2 mb-2 border-bottom"},r.a.createElement(D.a,{md:"8"},r.a.createElement("div",{className:"d-flex flex-column justify-content-between h-100"},r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold"},l),r.a.createElement(A.b,{to:n&&"published"!==t.state&&"submitted"!==t.state&&"/post/".concat(t.ID),className:"p-0 text-dark"},r.a.createElement("i",{className:"fas fa-square-full ".concat(me[t.type]," i-small")}),r.a.createElement("span",{className:"font-weight-bold",onClick:function(){"published"===t.state&&(window.location.href=t.url)}}," ",t.post_title)),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"block",overflow:"hidden",height:"50px",color:"gray"}},t.post_excerpt))),r.a.createElement("div",null,r.a.createElement("span",{className:"font-italic",style:{color:ue[t.state]||"black"}},ie[t.state])))),r.a.createElement(D.a,{md:"3",className:"d-flex align-items-center"},r.a.createElement("img",{src:t.thumbnailUrl||ge,alt:"mainImage",style:{width:"100%",height:"150px",objectFit:"contain"}})),r.a.createElement(D.a,{className:"d-flex flex-column align-items-center"},"published"!==t.state&&"submitted"!==t.state&&n&&r.a.createElement(A.b,{to:"/post/".concat(t.ID)},r.a.createElement("img",{alt:"edit",src:oe,style:{height:"25px",width:"25px"}})),n&&r.a.createElement(P.a,{outline:!0,size:"sm",style:{border:"none"},onClick:function(){j.show("post",Object(le.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V({id:t.ID});case 3:a(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))))}}," ",r.a.createElement("img",{alt:"delete",src:ce,style:{height:"25px",width:"25px"}})),"published"===t.state&&r.a.createElement(P.a,{outline:!0,size:"sm",style:{border:"none"},onClick:function(){return window.location.href=t.url}}," ",r.a.createElement("img",{alt:"view",src:se,style:{height:"25px",width:"25px"}}))))},fe=a(46),be=a(129),Ee=a(130),ve=a(131),ye=a(132),we=function(e){var t=e.onChangePage,a=e.page,l=e.pageSize,s=void 0===l?10:l,c=e.count,o=void 0===c?0:c,i=e.onChangePageSize,u=e.hidePageSize,m=e.className,d=Math.ceil(o/s),g=Object(n.useMemo)((function(){return[10,30,50,100].map((function(e){return{value:e,label:e}}))}),[]),h=Object(n.useState)(a),f=Object(I.a)(h,2),b=f[0],E=f[1];return Object(n.useEffect)((function(){E(a)}),[a]),r.a.createElement(be.a,{className:de()("grid-pagination",m)},u?null:r.a.createElement(fe.a,{styles:{container:function(e){return Object(p.a)({},e,{marginRight:"0.5rem",width:70,height:32})},indicatorsContainer:function(e){return Object(p.a)({},e,{margin:-4,width:40})},control:function(e){return Object(p.a)({},e,{borderRadius:0,minHeight:32})}},value:g.find((function(e){return e.value===s})),options:g,onChange:function(e){var a=Number(e&&e.value);a!==s&&i&&(i(a),t(1))}}),r.a.createElement(Ee.a,{disabled:a<2},r.a.createElement(ve.a,{onClick:function(){return t(a-1)},previous:!0,tag:"button"},"Prev")),r.a.createElement(Ee.a,null,r.a.createElement(ve.a,{onClick:function(){return t(1)},tag:"button"},"1")),r.a.createElement(ye.a,{className:"page-input-label",htmlFor:"pageNumberInput"}),r.a.createElement("input",{type:"text",value:b,onChange:function(e){return E(Number(e.target.value)||1)},className:"mx-2 p-0 text-center",onKeyUp:function(e){13===e.keyCode&&t(b)},style:{width:"45px",border:"1px solid #dee2e6",color:"#007bff"}}),r.a.createElement(Ee.a,null,r.a.createElement(ve.a,{onClick:function(){t(d)},tag:"button"},d)),r.a.createElement(Ee.a,{disabled:a>d-1},r.a.createElement(ve.a,{onClick:function(){t(a+1)},next:!0,tag:"button"},"Next")))},ke=function(){var e=Object(n.useState)(1),t=Object(I.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),c=Object(I.a)(s,2),o=c[0],i=c[1],u=new URL(window.location.href).searchParams.get("type"),m=Object(R.a)({promiseFn:Q,page:a,state:o,type:u,watchFn:function(e,t){return e.page!==t.page||e.state!==t.state}}),p=m.data,d=m.isLoading,g=m.reload,h=B()(p,(function(e){return e.data.posts.data}))||[],f=B()(p,(function(e){return e.data.posts.total}))||0,b=B()(p,(function(e){return e.data.posts.allowCreatePost}))||!1;return r.a.createElement("div",{className:"container mt-3"},r.a.createElement(U.a,null,r.a.createElement(D.a,{md:"12",className:"d-flex flex-row justify-content-between mb-3"},r.a.createElement("h4",null,"MY POSTS"),b&&r.a.createElement(A.b,{className:"btn btn.primary",style:{backgroundColor:"#007bff",color:"#fff"},to:"/create-post"},"Create new post")),r.a.createElement(D.a,{md:"3"},r.a.createElement("h6",null,"Filters"),[""].concat(Object(T.a)(Object.keys(ie))).map((function(e){return r.a.createElement(U.a,{key:e},r.a.createElement(P.a,{color:"link",className:"text-dark",onClick:function(){i(e),l(1)}},r.a.createElement("i",{className:de()("far mr-1",e===o?"fa-check-square":"fa-square")}),ie[e]||"All"))}))),d?r.a.createElement(D.a,null,r.a.createElement(M.a,{animated:!0,value:100})):h.length?r.a.createElement(D.a,{md:"9"},h.map((function(e){return r.a.createElement(he,{key:e.ID,post:e,reload:g,checkUser:b})})),r.a.createElement(U.a,null,r.a.createElement(D.a,{md:12,className:"p-0 d-flex justify-content-end"},r.a.createElement(we,{hidePageSize:!0,page:a,count:f,onChangePage:l})))):r.a.createElement(D.a,{md:"9"},r.a.createElement(_.a,{color:"primary"},"No post found."))))},Oe=a(135),Ne=a(136),Ce=a(137),xe=a(145),Se=a(80),Pe=a.n(Se),je=function(e){return{type:"SET_LOADING",isLoading:e}},Ae=function(e){return function(t){t(je(e))}},Le=a(61),Te=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.isOpen,n=e.toggle,l=e.callback,s=e.noCancel;return r.a.createElement(N.a,{isOpen:a,toggle:function(){s&&l&&l(),n()}},r.a.createElement(C.a,{toggle:function(){s&&l&&l(),n()}},"Alert"),r.a.createElement(x.a,null,t),r.a.createElement(S.a,null,r.a.createElement(P.a,{color:"primary",onClick:function(){l&&l(),n()}},"Ok"),l&&!s&&r.a.createElement(P.a,{color:"secondary",onClick:n},"Cancel")))}}]),a}(n.Component),Ie=a(56),Ue=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).onBack=function(){n.state.edited?n.setState({isOpenModal:!0,message:"Content has changed, are you sure to discard your changes and back to list?",callback:function(){window.location.href="/myposts"}}):window.location.href="/myposts"},n.searchTags=function(){var e=Object(le.a)(re.a.mark((function e(t){var a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee(1);case 3:a=e.sent,r=a.data.data.map((function(e){return{value:e.name,label:e.name}})),n.setState({optionsTag:r}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),n.searchAuthors=function(){var e=Object(le.a)(re.a.mark((function e(t){var a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z(1);case 3:a=e.sent,r=a.data.data.map((function(e){return{value:e.name,label:e.name}})),n.setState({optionsAuthor:r}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),n.getDetailPost=function(){var e=Object(le.a)(re.a.mark((function e(t){var a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.props.dispatchSetLoading(!0),e.next=4,$(t);case 4:a=e.sent,r=a.data.post,n.setState({body:r.post_content,preamble:r.post_excerpt,headline:r.post_title,_id:r.ID,avatar:r.thumbnailUrl,avatarOld:r.thumbnailUrl,tags:r.tags?r.tags.map((function(e){return e.name})):[],author:r.authors?r.authors.map((function(e){return e.display_name})):[],acceptTerm:r.acceptTerm}),n.props.dispatchSetLoading(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n.props.dispatchSetLoading(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.removePTagInList=function(e){return e.replace(/<li>\n\t<p>/g,"<li>").replace(/<\/p>\n\t<\/li>/g,"</li>")},n.componentDidMount=function(){var e=n.getPostId();e&&n.getDetailPost(e),n.searchTags(1),n.searchAuthors(1)},n.getPostId=function(){var e,t;return(null===(e=n.props)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.pathname.split("/"))[2]},n.checkEmpty=function(){var e=n.state,t=e.headline,a=e.acceptTerm,r=e.preamble,l=e.body,s=e.avatar,c=0;return""===t&&(n.setState({showAlertHeadline:!0}),c=1),a||(n.setState({showAlertAcceptTerm:!0}),c=1),""===r&&(n.setState({showAlertPreamble:!0}),c=1),null===s&&(n.setState({showAlertImage:!0}),c=1),""===l&&(n.setState({showAlertBody:!0}),c=1),c},n.onCreatePost=function(){var e=Object(le.a)(re.a.mark((function e(t){var a,r,l,s,c,o,i,u,m,p,d;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state,r=a._id,l=a.avatar,s=a.preamble,a.tags,c=a.body,a.bodyPortable,o=a.headline,a.author,i=a.avatarOld,u=a.acceptTerm,m=a.avatarUpload,"submit"!==t){e.next=6;break}if(!n.checkEmpty()){e.next=4;break}return e.abrupt("return");case 4:e.next=7;break;case 6:n.setState({showAlertImage:!1,showAlertPreamble:!1,showAlertHeadline:!1,showAlertAcceptTerm:!1,showAlertBody:!1});case 7:return e.prev=7,n.props.dispatchSetLoading(!0),p=new FormData,r&&p.append("_id",r),p.append("headline",o),p.append("preamble",s),p.append("actionType",t),p.append("body",c),p.append("tags",n.state.tags),p.append("authors",n.state.author),p.append("acceptTerm",u),null!==i&&(null===l&&p.append("mainImage",null),l!==i&&p.append("mainImage",m.file)),null===i&&null!==l&&p.append("mainImage",m.file),e.next=22,g=p,Y.post("/api/my-post/save",g);case 22:if(!(d=e.sent).data||d.data.status){e.next=25;break}throw new Error(d.data.error);case 25:""===r&&n.setState({_id:d.data.post._id}),d.data.mainImageUrl?n.setState({avatar:d.data.post.mainImageUrl,avatarOld:d.data.post.mainImageUrl}):n.setState({avatarOld:l}),n.props.dispatchSetLoading(!1),n.setState({isOpenModal:!0,message:"draft"===t?"The post has been saved successfully":"The post has been saved and submitted successfully",edited:!1,callback:function(){return window.location.href="/myposts"},noCancel:!0}),e.next=36;break;case 31:e.prev=31,e.t0=e.catch(7),n.props.dispatchSetLoading(!1),n.setState({isOpenModal:!0,message:e.t0.message}),console.log(e.t0);case 36:case"end":return e.stop()}var g}),e,null,[[7,31]])})));return function(t){return e.apply(this,arguments)}}(),n.toggle=function(){n.setState({isOpenModal:!n.state.isOpenModal,callback:null,noCancel:!1})},n.returnOption=function(e){return e.map((function(e){return{value:e,label:e}}))},n.setEdited=function(e){return n.setState({edited:e})},n.state={_id:"",avatarUpload:null,avatar:null,avatarOld:null,body:"",bodyPortable:"",headline:"",preamble:"",tags:"",author:"",acceptTerm:!1,actionType:"draft",showAlertAcceptTerm:!1,showAlertHeadline:!1,showAlertPreamble:!1,showAlertBody:!1,showAlertImage:!1,optionsTag:[],optionsAuthor:[],isOpenModal:!1,message:"",edited:!1,callback:null,noCancel:!1},n}return Object(w.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.avatar,n=t.body,l=t.bodyPortable,s=t.headline,c=t.preamble,o=t.tags,i=t.author,u=t.acceptTerm,m=t.showAlertAcceptTerm,p=t.showAlertHeadline,d=t.showAlertPreamble,g=t.showAlertBody,h=t.showAlertImage,f=t.isOpenModal;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"p-3"},r.a.createElement("h5",{className:"mb-2"},"".concat(this.getPostId()?"EDIT":"CREATE"," POST")),r.a.createElement(Oe.a,{ref:function(t){e.form=t},onSubmit:function(e){return console.log("submit ",e)}},r.a.createElement("div",{className:"mb-5"},r.a.createElement("h6",null,"Headline"),r.a.createElement(Ne.a,null,r.a.createElement(Ce.a,{name:"headline",id:"headline",bsSize:"sm",value:s,onChange:function(t){return e.setState({headline:t.target.value})},onKeyUp:function(){return e.setEdited(!0)}}),p&&""===s&&r.a.createElement(_.a,{className:"mt-2",color:"danger"},"Headline must not be empty"))),r.a.createElement("div",{className:"mb-5"},r.a.createElement("h6",null,"Preamble"),r.a.createElement(Ne.a,null,r.a.createElement(Ce.a,{name:"preamble",id:"preamble",bsSize:"sm",value:c,onChange:function(t){return e.setState({preamble:t.target.value})},onKeyUp:function(){return e.setEdited(!0)}}),d&&""===c&&r.a.createElement(_.a,{className:"mt-2",color:"danger"},"Preamble must not be empty"))),r.a.createElement("div",{className:"mb-5"},r.a.createElement("h6",null,"Body"),r.a.createElement(Pe.a,{data:this.state.body,config:{allowedContent:!0,removePlugins:"Paste",toolbar:[["Bold","Italic","Strike","Undo","Redo","Underline","NumberedList","BulletedList","Link"]]},onChange:function(){var t=Object(le.a)(re.a.mark((function t(a){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l||!l.trim()){t.next=3;break}return t.next=3,e.setState({edited:!0});case 3:e.setState({body:a.editor.getData()});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),g&&""===n&&r.a.createElement(_.a,{className:"mt-2",color:"danger"},"Body must not be empty")),r.a.createElement("div",{className:"mb-5"},r.a.createElement("h6",null,"Tags"),r.a.createElement(Le.a,{value:o?this.returnOption(o):null,isMulti:!0,options:this.state.optionsTag,className:"small",styles:{height:"32px"},onChange:function(t){return e.setState({tags:t?t.map((function(e){return e.value})):""})},onMenuOpen:function(){return e.setEdited(!0)}})),r.a.createElement("div",{className:"mb-5"},r.a.createElement("h6",null,"Author"),r.a.createElement(Le.a,{value:i?this.returnOption(i):null,isMulti:!0,options:this.state.optionsAuthor,className:"small",styles:{height:"32px"},onChange:function(t){return e.setState({author:t?t.map((function(e){return e.value})):""})},onMenuOpen:function(){return e.setEdited(!0)}})),r.a.createElement("div",{className:"mb-5"},r.a.createElement("h6",null,"Image (max size: 2mb)"),r.a.createElement("img",{src:this.state.avatar||Ie,alt:"avatar",className:" center-cropped mb-3",style:{width:"100%",height:"500px",objectFit:"cover"}}),r.a.createElement("input",{onChange:function(t){t.target.files[0]&&e.setState({avatar:window.URL.createObjectURL(t.target.files[0]),avatarUpload:{file:t.target.files[0],name:t.target.files[0].name}})},type:"file",ref:function(t){e.imagePicker=t},className:"d-none"}),h&&null===a&&r.a.createElement(_.a,{className:"mt-2",color:"danger"},"Image must not be empty"),r.a.createElement(P.a,{outline:!0,color:"primary",className:"mr-2",size:"sm",onClick:function(){e.setEdited(!0),e.imagePicker.click()}},"Browser")," ",r.a.createElement(P.a,{outline:!0,color:"secondary",size:"sm",onClick:function(){return e.setState({avatar:null,edited:!0})}},"Remove")," "),r.a.createElement("div",{className:"mb-5"},r.a.createElement(xe.a,{type:"switch",id:"exampleCustomSwitch",name:"customSwitch",label:"Accept terms and condition",checked:u,onChange:function(t){return e.setState({acceptTerm:t.target.checked})},onKeyUp:function(){return e.setEdited(!0)}}),m&&!u&&r.a.createElement(_.a,{className:"mt-2",color:"danger"},"You must accept terms and condition"))),r.a.createElement("div",{className:"border d-flex flex-row align-items-center justyfi-content-between"},r.a.createElement("div",null,r.a.createElement(P.a,{color:"primary",className:"mr-2 px-3",size:"sm",onClick:function(){return e.onCreatePost("draft")}},"Save as draft")," ",r.a.createElement(P.a,{color:"danger",size:"sm",className:"mr-2 px-3",onClick:function(){return e.onCreatePost("submit")}},"Save and submit")," "),r.a.createElement("div",null,r.a.createElement(P.a,{color:"warning",size:"sm",className:"mr-2 px-3",onClick:function(){return e.onBack()}},"Back to list")," ")),r.a.createElement(Te,{isOpen:f,toggle:this.toggle,message:this.state.message,callback:this.state.callback,noCancel:this.state.noCancel})))}}]),a}(n.Component),De={dispatchSetLoading:Ae},Me=Object(c.b)(null,De)(Ue),_e=[{path:"/",name:"My post",component:ke},{path:"/post/:id",name:"Post",component:Me},{path:"/create-post",name:"Create post",component:Me}],ze=function(){return r.a.createElement(A.a,null,r.a.createElement(L.c,null,_e.map((function(e,t){return r.a.createElement(L.a,{key:t,exact:!0,path:e.path,component:e.component})}))))},Be=function(){var e=document.getElementsByClassName("dropdown-menu")[0],t=document.getElementById("dropdown_profile");t&&t.addEventListener("click",(function(){"none"!==e.style.display&&e.style.display?e.style.display="none":(e.style.display="block",e.style.transform="translate3d(-1px, 34px, 0px)")}))},Re=function(){return n.useEffect((function(){Be()}),[]),n.createElement(c.a,{store:v},n.createElement(i,null),n.createElement(ze,null),n.createElement(j,{ref:j.registerModal}))},Fe=function(e){return function(){var t=Object(le.a)(re.a.mark((function t(a){var n;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(je(!0)),t.prev=1,t.next=4,te(e);case 4:n=t.sent,a({type:"SET_LIST_USER",payload:n.data}),a(je(!1)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a(je(!1));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},He=a(139),Ke=a(140),Ye=a(141),We=a(142),qe=a(143),Ge=a(138),Je=a(57),Xe=a.n(Je);var $e=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).componentDidMount=function(){},e.renderAction=function(t){return r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement("img",{src:Xe.a,style:{height:20,width:20,cursor:"pointer"},onClick:function(){return e.props.onClickAction(t)},alt:"aaa"}))},e.renderEmail=function(e){return r.a.createElement(P.a,{color:"link",className:"d-flex align-items-center"},r.a.createElement("span",{style:{textDecorationLine:"underline"}},e))},e.showTag=function(e){return e&&0!==e.length?e.reduce((function(t,a,n){return n===e.length-1?t+a.name:t+a.name+", "}),""):""},e}return Object(w.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.onClickAction,t.postAdmin);return console.log(a),r.a.createElement(U.a,{className:"mt-2"},r.a.createElement(D.a,{md:"12"},r.a.createElement(Ge.a,{bordered:!0,hover:!0,size:"sm",className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"Tags"),r.a.createElement("th",null,"Created By"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,a&&a.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:"align-middle"},t.headline),r.a.createElement("td",{className:"align-middle"},t.authors),r.a.createElement("td",{className:"align-middle"},e.showTag(t.tags)),r.a.createElement("td",{className:"align-middle"},t.post_author),r.a.createElement("td",{className:"align-middle"},function(e){switch(e){case"draft":return"Draft";case"submitted":return"Submitted";case"approved":return"Approved";case"published":return"Published";case"rejected":return"Rejected";default:return""}}(t.state)),r.a.createElement("td",{className:"align-middle"},e.renderAction(t.ID)))}))))))}}]),a}(n.Component),Qe=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"render",value:function(){return r.a.createElement(Ne.a,null,this.props.label&&r.a.createElement(ye.a,null,this.props.label),r.a.createElement(fe.a,this.props))}}]),a}(r.a.PureComponent),Ve=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).onKeyUp=function(e){13===e.keyCode&&n.props.changePage(parseInt(n.state.pageNumberInput),n.props.changePageParams)},n.onChangePageNumber=function(e){n.setState({pageNumberInput:e.target.value})},n.onNextClick=function(){n.changePage("relative",1)},n.onPrevClick=function(){n.changePage("relative",-1)},n.clickFirstPage=function(){n.changePage("absolute",1)},n.clickLastPage=function(){n.changePage("absolute",n.props.pageCount)},n.changePage=function(e,t){var a=1;if("relative"===e){var r=n.props.currentPage;a=parseInt(r)+t}"absolute"===e&&(a=t),n.props.changePage(a,n.props.changePageParams),n.setState({pageNumberInput:a.toString()})},n.options=[{label:10,value:10},{label:20,value:20},{label:50,value:50},{label:100,value:100}],n.state={pageNumberInput:n.props.currentPage||1},n}return Object(w.a)(a,[{key:"componentDidUpdate",value:function(e){var t=e.currentPage;this.props.currentPage&&t!==this.props.currentPage&&this.setState({pageNumberInput:this.props.currentPage})}},{key:"render",value:function(){var e=this,t=this.props.currentPage<=1||!this.props.currentPage,a=this.props.currentPage>=this.props.pageCount||!this.props.currentPage;return r.a.createElement(be.a,{className:"grid-pagination d-flex justify-content-end"},r.a.createElement("div",{style:{width:80},className:"mr-2"},this.props.pageSize&&r.a.createElement(Qe,{value:{label:this.options.filter((function(t){return t.value===e.props.pageSize}))[0].label,value:this.props.pageSize},style:{width:40},options:this.options,onChange:function(){var t=Object(le.a)(re.a.mark((function t(a){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.pageSize!==a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.props.changePageSize(a.value);case 4:e.props.onChangePageSize();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),r.a.createElement(Ee.a,{disabled:t},r.a.createElement(ve.a,{disabled:t,onClick:this.onPrevClick,previous:!0,tag:"button"},"Prev")),r.a.createElement(Ee.a,null,r.a.createElement(ve.a,{onClick:this.clickFirstPage,tag:"button"},"1")),r.a.createElement(ye.a,{className:"page-input-label",htmlFor:"pageNumberInput"}),r.a.createElement("input",{type:"text",onKeyUp:this.onKeyUp,onChange:this.onChangePageNumber,value:this.state.pageNumberInput,className:"mx-2 p-0 text-center",style:{width:"45px",border:"1px solid #dee2e6",color:"#007bff"}}),r.a.createElement(Ee.a,null,r.a.createElement(ve.a,{onClick:this.clickLastPage,tag:"button"},this.props.pageCount||1)),r.a.createElement(Ee.a,{disabled:a},r.a.createElement(ve.a,{disabled:a,onClick:this.onNextClick,next:!0,tag:"button"},"Next")))}}]),a}(n.Component),Ze=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).getData=function(){var t=e.props;(0,t.getListUsers)(t.currentPage)},e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.listUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:"mt-3"},r.a.createElement(D.a,{md:"12"},r.a.createElement(Ge.a,{bordered:!0,hover:!0,size:"sm",className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Company"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Allow create post"))),r.a.createElement("tbody",null,t&&t.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:"align-middle"},t.display_name),r.a.createElement("td",{className:"align-middle"},t.user_email),r.a.createElement("td",{className:"align-middle"},t.company_name),r.a.createElement("td",{className:"align-middle"},t.address_line_1),r.a.createElement("td",{className:"text-center"},r.a.createElement(xe.a,{type:"checkbox",id:t._id,checked:t.allowCreatePost,onClick:function(){return e.props.updateAllowCreate(t._id,e.props.currentPage)}})))})))))),r.a.createElement(U.a,null,r.a.createElement(D.a,{md:12},r.a.createElement(Ve,{pageCount:this.props.pageCountListUser,currentPage:this.props.currentPage,changePage:function(t){e.props.getListUsers(t)}}))))}}]),a}(n.Component),et={getListUsers:Fe,updateAllowCreate:function(e,t){return function(){var a=Object(le.a)(re.a.mark((function a(n){var r;return re.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(je(!0)),a.prev=1,a.next=4,ae(e);case 4:return a.next=6,te(t);case 6:r=a.sent,n({type:"SET_LIST_USER",payload:r.data}),n(je(!1)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),n(je(!1));case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}},tt=Object(c.b)((function(e){return{listUser:e.admin.listUser,currentPage:e.admin.currentPageListUser,pageCountListUser:e.admin.pageCountListUser}}),et)(Ze),at=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.isOpen,n=e.toggle,l=e.clickOk;return r.a.createElement(N.a,{isOpen:a,toggle:n},r.a.createElement(C.a,{toggle:n},"Alert"),r.a.createElement(x.a,null,t),r.a.createElement(S.a,null,r.a.createElement(P.a,{color:"primary",onClick:function(){return l()}},"Ok")))}}]),a}(n.Component),nt=(a(56),function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={activeTab:"2",isOpenDetail:!1,isOpenNote:!1,postShow:null,isOpenAlert:!1,message:"",rejectMessage:""},e.componentDidMount=function(){e.props.getListPost(1),e.props.getListUsers(1)},e.toggle=function(t){e.state.activeTab!==t&&e.setState({activeTab:t})},e.toggleModalDetail=function(){e.setState({isOpenDetail:!1})},e.toggleModalNote=function(){e.setState({isOpenNote:!1})},e.onClickAction=function(){var t=Object(le.a)(re.a.mark((function t(a){var n,r;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.props.dispatchSetLoading(!0),t.next=4,q(a);case 4:if(n=t.sent,"published"!==(r=n.data.post).state){t.next=9;break}return window.location.href=r.url,t.abrupt("return");case 9:e.setState({postShow:r,isOpenDetail:!e.state.isOpenDetail}),e.props.dispatchSetLoading(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),e.props.dispatchSetLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),e.showTag=function(e){return e&&0!==e.length?e.reduce((function(t,a,n){return n===e.length-1?t+a.name:t+a.name+", "}),""):""},e.renderModalNoteReject=function(){var t=e.state,a=t.postShow,n=t.rejectMessage;return r.a.createElement(N.a,{isOpen:e.state.isOpenNote,toggle:e.toggleModalNote,centered:!0},r.a.createElement(C.a,{toggle:e.toggleModalNote},"Rejecting reason"),r.a.createElement(x.a,null,r.a.createElement(Ne.a,null,r.a.createElement(Ce.a,{type:"textarea",name:"text",id:"exampleText",className:"small",size:"sm",rows:8,placeholder:"Type something...",value:n,onChange:function(t){return e.setState({rejectMessage:t.target.value})}}))),r.a.createElement(S.a,null,r.a.createElement(P.a,{color:"secondary",onClick:function(){e.setState({isOpenNote:!1})},size:"sm"},"Cancel"),r.a.createElement(P.a,{color:"primary",onClick:function(){return e.rejectPostAdmin(a.ID,n)},size:"sm"},"Send")))},e.rejectPostAdmin=function(){var t=Object(le.a)(re.a.mark((function t(a,n){var r;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.props.dispatchSetLoading(!0),t.next=4,X(a,n);case 4:r=t.sent,console.log("resreject",r),e.props.dispatchSetLoading(!1),e.setState({isOpenAlert:!0,message:"This post has been rejected successfully",isOpenNote:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),e.props.dispatchSetLoading(!1),e.setState({isOpenAlert:!0,message:"An error occurred, please try again"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}(),e.clickOk=function(){e.setState({isOpenAlert:!1,isOpenDetail:!1}),e.props.getListPost(1)},e.approvePostAdmin=function(){var t=Object(le.a)(re.a.mark((function t(a){var n;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.props.dispatchSetLoading(!0),t.next=4,J(a);case 4:n=t.sent,console.log("resapprove",n),e.props.dispatchSetLoading(!1),e.setState({isOpenAlert:!0,message:"This post has been approved successfully"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),e.props.dispatchSetLoading(!1),e.setState({isOpenAlert:!0,message:"An error occurred, please try again"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e.toggleAlert=function(){return e.setState({isOpenAlert:!e.state.isOpenAlert})},e.renderModalDetail=function(t){return r.a.createElement(N.a,{isOpen:e.state.isOpenDetail,toggle:e.toggleModalDetail},r.a.createElement(C.a,{className:"font-weight-bold",toggle:e.toggleModalDetail},"Post Details"),r.a.createElement(x.a,null,r.a.createElement("div",{className:"mb-2"},r.a.createElement("h6",{className:"font-weight-bold"},"Headline")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("span",null,t&&""!==t.headline?t.headline:"")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("h6",{className:"font-weight-bold"},"Preamble")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("span",null,t&&""!==t.preamble?t.preamble:"")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("h6",{className:"font-weight-bold"},"Body")),r.a.createElement("div",{className:"p-2 mb-2"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t&&""!==t.body?t.body:"non body"}})),r.a.createElement("div",{className:"mb-2"},r.a.createElement("h6",{className:"font-weight-bold"},"Tag")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("span",null,t&&0!==t.tags.length?e.showTag(t.tags):"")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("h6",{className:"font-weight-bold"},"Authors")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("span",null,t&&""!==t.authors?t.authors:"")),r.a.createElement("div",{className:"mb-2"},r.a.createElement("h6",{className:"font-weight-bold"},"Main Image")),t&&t.mainImageUrl&&r.a.createElement("img",{src:t.mainImageUrl,alt:"avatar",className:" center-cropped mb-3",style:{width:"100%",height:"300px",objectFit:"contain"}}),t&&!t.mainImageUrl&&r.a.createElement("span",null,"non image")),r.a.createElement(S.a,{className:"d-flex"},t&&e.renderFooterModalDetail(t),!t&&r.a.createElement(P.a,{onClick:e.toggleModalDetail,color:"secondary"},"Close")))},e.renderFooterModalDetail=function(t){return"submitted"===t.state?r.a.createElement("div",null,r.a.createElement(P.a,{color:"danger",onClick:function(){return e.setState({isOpenNote:!0})},size:"sm"},"Reject"),r.a.createElement(P.a,{color:"primary",onClick:function(){return e.approvePostAdmin(t.ID)},size:"sm",className:"ml-2"},"Accept")):r.a.createElement(P.a,{size:"sm",onClick:e.toggleModalDetail,color:"secondary"},"Close")},e}return Object(w.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(He.a,{tabs:!0},r.a.createElement(Ke.a,{style:{cursor:"pointer"}},r.a.createElement(Ye.a,{className:de()({active:"1"===this.state.activeTab}),onClick:function(){e.toggle("1")}},"Users")),r.a.createElement(Ke.a,{style:{cursor:"pointer"}},r.a.createElement(Ye.a,{className:de()({active:"2"===this.state.activeTab}),onClick:function(){e.toggle("2")}},"Posts"))),r.a.createElement(We.a,{activeTab:this.state.activeTab},r.a.createElement(qe.a,{tabId:"1"},r.a.createElement(tt,null)),r.a.createElement(qe.a,{tabId:"2"},r.a.createElement(U.a,{className:"mt-3"},r.a.createElement(D.a,{sm:12},r.a.createElement($e,{onClickAction:this.onClickAction,postAdmin:this.props.postAdmin}))),r.a.createElement(U.a,null,r.a.createElement(D.a,{md:12},r.a.createElement(Ve,{pageCount:this.props.pageCountListPost,currentPage:this.props.currentPageListPost,changePage:function(t){e.props.getListPost(t)}}))))),this.renderModalDetail(this.state.postShow),this.renderModalNoteReject(),r.a.createElement(at,{isOpen:this.state.isOpenAlert,message:this.state.message,toogle:this.toggleAlert,clickOk:this.clickOk}))}}]),a}(n.Component)),rt={dispatchSetLoading:Ae},lt=Object(c.b)(null,rt)(nt),st={getListUsers:Fe,getListPost:function(e){return function(){var t=Object(le.a)(re.a.mark((function t(a){var n;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(je(!0)),t.prev=1,t.next=4,G(e);case 4:n=t.sent,a({type:"SET_LIST_POST_ADMIN",payload:n.data}),a(je(!1)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a(je(!1));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}},ct=Object(c.b)((function(e){return{listUser:e.admin.listUser,postAdmin:e.admin.postAdmin,currentPageListUser:e.admin.currentPageListUser,pageCountListUser:e.admin.pageCountListUser,pageCountListPost:e.admin.pageCountListPost,currentPageListPost:e.admin.currentPageListPost}}),st)(lt),ot=function(){return n.useEffect((function(){return Be()}),[]),n.createElement(c.a,{store:v},n.createElement(i,null),n.createElement(ct,null),n.createElement(j,{ref:j.registerModal}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(121);-1!==window.location.href.indexOf("/myposts")?s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Re,null)),document.getElementById("app")):(console.log(window.location.href),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ot,null)),document.getElementById("app"))),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports="http://publiccloud.local/pi/wp-content/themes/publicinsight/build/static/media/default_image.440b9b23.jpg"},57:function(e,t,a){e.exports="http://publiccloud.local/pi/wp-content/themes/publicinsight/build/static/media/eye.ebb2e064.png"},63:function(e,t,a){},82:function(e,t,a){e.exports=a(122)},87:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.13b6dc3b.chunk.js.map